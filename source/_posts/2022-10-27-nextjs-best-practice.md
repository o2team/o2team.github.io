title: ä¸€æ–‡äº†è§£ NextJS å¹¶å¯¹æ€§èƒ½ä¼˜åŒ–åšå‡ºæœ€ä½³å®è·µ  
subtitle: ä»`æ˜¯ä»€ä¹ˆ`ï¼Œ`ä¸ºä»€ä¹ˆ`ï¼Œ`æ€ä¹ˆåš`æ¥ä¸ºå¤§å®¶é˜è¿° NextJS ä»¥åŠå¦‚ä½•ä¼˜åŒ– NextJS åº”ç”¨ä½“éªŒã€‚  
cover: https://img12.360buyimg.com/img/s1800x1096_jfs/t1/148662/13/30826/72158/6359f477E3e4a45c5/b775a7bebd4bafdb.png  
category: ç»éªŒåˆ†äº«
tags: 
  - Nextjs
  - æ€§èƒ½ä¼˜åŒ–
  - æœ€ä½³å®è·µ  
author:   
  nick: é˜¿æ–‡  
  github_name: AwesomeDevin  
date: 2022-10-27 21:00:00  
wechat:  
    share_cover: https://img12.360buyimg.com/img/s1800x1096_jfs/t1/148662/13/30826/72158/6359f477E3e4a45c5/b775a7bebd4bafdb.png  
    share_title: ä¸€æ–‡äº†è§£ NextJS å¹¶å¯¹æ€§èƒ½ä¼˜åŒ–åšå‡ºæœ€ä½³å®è·µ  
    share_desc:  ä»`æ˜¯ä»€ä¹ˆ`ï¼Œ`ä¸ºä»€ä¹ˆ`ï¼Œ`æ€ä¹ˆåš`æ¥ä¸ºå¤§å®¶é˜è¿° NextJS ä»¥åŠå¦‚ä½•ä¼˜åŒ– NextJS åº”ç”¨ä½“éªŒã€‚  
---

## å¼•è¨€
ä»æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»`æ˜¯ä»€ä¹ˆ`ï¼Œ`ä¸ºä»€ä¹ˆ`ï¼Œ`æ€ä¹ˆåš`æ¥ä¸ºå¤§å®¶é˜è¿° NextJS ä»¥åŠå¦‚ä½•ä¼˜åŒ– NextJS åº”ç”¨ä½“éªŒã€‚
## ä¸€ã€NextJSæ˜¯ä»€ä¹ˆ
`NextJS`æ˜¯ä¸€æ¬¾åŸºäº React è¿›è¡Œ web åº”ç”¨å¼€å‘çš„æ¡†æ¶ï¼Œå®ƒä»¥æå¿«çš„åº”ç”¨ä½“éªŒè€Œé—»åï¼Œå†…ç½® Sassã€Lessã€ES ç­‰ç‰¹æ€§ï¼Œå¼€ç®±å³ç”¨ã€‚SSR åªæ˜¯ NextJS çš„ä¸€ç§åœºæ™¯è€Œå·²ï¼Œå®ƒæ‹¥æœ‰`4ç§æ¸²æŸ“æ¨¡å¼`ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºè‡ªå·±çš„åº”ç”¨é€‰æ‹©æ­£ç¡®çš„æ¸²æŸ“æ¨¡å¼ï¼š
- **Client Side Rendering (CSR)**   
  å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œå¾€å¾€æ˜¯ä¸€ä¸ª SPA(å•é¡µé¢åº”ç”¨)ï¼ŒHTMLæ–‡ä»¶ä»…åŒ…å«JS\CSSèµ„æºï¼Œä¸æ¶‰åŠé¡µé¢å†…å®¹ï¼Œé¡µé¢å†…å®¹éœ€è¦æµè§ˆå™¨è§£æJSåäºŒæ¬¡æ¸²æŸ“ã€‚
- **Static Site Generation (SSG)**  
  é™æ€é¡µé¢ç”Ÿæˆï¼Œå¯¹äºä¸éœ€è¦é¢‘ç¹æ›´æ–°çš„é™æ€é¡µé¢å†…å®¹ï¼Œé€‚åˆSSRï¼Œä¸ä¾èµ–æœåŠ¡ç«¯ã€‚
- **Server Side Rendering (SSR)**  
  æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå¯¹äºéœ€è¦é¢‘ç¹æ›´æ–°çš„é™æ€é¡µé¢å†…å®¹ï¼Œæ›´é€‚åˆä½¿ç”¨SSRï¼Œä¾èµ–æœåŠ¡ç«¯ã€‚
- **IncreIncremental Site Rendering (ISR)**  
  å¢é‡é™æ€ç”Ÿæˆï¼ŒåŸºäºé¡µé¢å†…å®¹çš„ç¼“å­˜æœºåˆ¶ï¼Œä»…å¯¹æœªç¼“å­˜è¿‡çš„é™æ€é¡µé¢è¿›è¡Œç”Ÿæˆï¼Œä¾èµ–æœåŠ¡ç«¯ã€‚ 
  
  
SSG / ISR éƒ½æ˜¯éå¸¸é€‚åˆåšå®¢ç±»åº”ç”¨çš„ï¼ŒåŒºåˆ«åœ¨äº`SSGæ˜¯æ„å»ºæ—¶ç”Ÿæˆï¼Œæ•ˆç‡è¾ƒä½ï¼ŒISRæ˜¯åŸºäºå·²æœ‰çš„ç¼“å­˜æŒ‰éœ€ç”Ÿæˆï¼Œæ•ˆç‡æ›´é«˜`ã€‚


![image.png](https://img12.360buyimg.com/img/s2316x746_jfs/t1/60416/40/22041/347990/635a0abdEecd27646/84991e55d655e4a1.png)


## äºŒã€ä¸ºä»€ä¹ˆé€‰ NextJS
### ä¼˜ç‚¹:
1. **é¦–å±åŠ è½½é€Ÿåº¦å¿«**  
    æˆ‘ä»¬çš„å†…åµŒåœºæ™¯æ¯”è¾ƒä¸°å¯Œï¼Œå› æ­¤æ¯”è¾ƒ`è¿½æ±‚é¡µé¢çš„ä¸€ä¸ªé¦–å±ä½“éªŒ`ï¼ŒNextJS çš„äº§ç‰©ç±»ä¼¼ `MPAï¼ˆå¤šé¡µé¢åº”ç”¨ï¼‰`ï¼Œåœ¨è¯·æ±‚é¡µé¢æ—¶ä¼šå¯¹å½“å‰é¡µé¢çš„èµ„æºè¿›è¡Œ`æŒ‰éœ€åŠ è½½`,è€Œä¸æ˜¯å»åŠ è½½æ•´ä¸ªåº”ç”¨, ç›¸å¯¹äº SPA è€Œè¨€ï¼Œå¯ä»¥å®ç°æ›´ä¸ºæè‡´çš„ç”¨æˆ·ä½“éªŒã€‚
2. **SEOä¼˜åŒ–å¥½**  
    SSR \ SSG \ ISR æ”¯æŒ`é¡µé¢å†…å®¹é¢„åŠ è½½`ï¼Œæå‡äº†æœç´¢å¼•æ“çš„å‹å¥½æ€§ã€‚
    
3. **å†…ç½®ç‰¹æ€§æ˜“ç”¨ä¸”æè‡´**  
    NextJS å†…ç½® `getStaticProps`ã€`getServerSideProps`ã€`next/image`ã€`next/link`ã€`next/script`ç­‰ç‰¹æ€§ï¼Œå……åˆ†åˆ©ç”¨è¯¥æ¡†æ¶çš„è¿™äº›ç‰¹æ€§ï¼Œä¸ºä½ çš„ç”¨æˆ·æä¾›æ›´é«˜å±‚æ¬¡çš„ä½“éªŒï¼Œè¿™äº›å†…å®¹åæ–‡ä¼šç»†è®²ã€‚

### ç¼ºç‚¹ï¼š
1. **é¡µé¢å“åº”ç›¸å¯¹äºSPAè€Œè¨€æ›´æ…¢**  
    ç”±äºé¡µé¢èµ„æºåˆ†é¡µé¢æŒ‰éœ€åŠ è½½ï¼Œæ¯æ¬¡è·¯ç”±å‘ç”Ÿå˜åŒ–éƒ½éœ€è¦åŠ è½½æ–°çš„èµ„æºï¼Œä¼˜åŒ–ä¸å¤Ÿå¥½çš„è¯ï¼Œä¼šå¯¼è‡´`é¡µé¢å¡é¡¿`ã€‚
2. **å¼€å‘ä½“éªŒä¸å¤Ÿå‹å¥½**  
    å¼€å‘ç¯å¢ƒä¸‹ NextJS æ ¹æ®å½“å‰é¡µé¢æŒ‰éœ€è¿›è¡Œèµ„æºå®æ—¶æ„å»ºï¼Œå½±å“å¼€å‘åŠè°ƒè¯•ä½“éªŒ
    
## ä¸‰ã€å¦‚ä½•å°† NextJS åº”ç”¨ä½“éªŒæå‡åˆ°æè‡´
ä½œä¸ºä¸€åå¼€å‘è€…ï¼Œæˆ‘ä»¬è¿½æ±‚çš„ä¸åº”è¯¥æ˜¯åº”ç”¨èƒ½ç”¨å°±å¥½ï¼Œè€Œæ˜¯å¥½ç”¨ï¼Œé‚£ä¹ˆå¦‚ä½•è¯„ä»·æˆ‘ä»¬çš„åº”ç”¨æ˜¯å¦å¥½ç”¨å‘¢ï¼Ÿ  
- æœ€ç›´æ¥çš„æ–¹æ¡ˆå½“ç„¶æ˜¯é€šè¿‡æ”¶é›†ç”¨æˆ·åé¦ˆæ¥è¯„åˆ¤
- ä»å¼€å‘å±‚é¢ï¼Œæœ€ç›´è§‚çš„å°±æ˜¯é€šè¿‡`performance`ä¸`lighthouse`æ¥è¯„åˆ¤
### 3.1 ä¼˜åŒ–å‰
>å¦‚ä½ æ‰€è§ï¼Œç”±äºåº”ç”¨æ¨¡å—çš„ä¸€ä¸ªå¤æ‚æ€§ï¼Œæˆ‘ä»¬çš„ NextJS åº”ç”¨èµ·åˆæ€§èƒ½å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œç”šè‡³è°ˆå¾—ä¸Šæ˜¯å·®
- FCP: é¦–æ¬¡å†…å®¹ç»˜åˆ¶æ—¶é—´1.8s  

    ![image.png](https://img12.360buyimg.com/img/s767x265_jfs/t1/123109/25/30441/31233/635a0b27Ed09a3a61/72e64e765b92c082.png)


- lighthouse: æ€§èƒ½è¯„åˆ†æŠ¥å‘Š 55åˆ†ï¼ŒTime to Interactive(TTI) å¯äº¤äº’æ—¶é—´ä¸º 7.3sï¼Œé€šå¸¸æ˜¯å‘ç”Ÿåœ¨é¡µé¢ä¾èµ–çš„èµ„æºå·²ç»åŠ è½½å®Œæˆã€‚  

    ![](https://img12.360buyimg.com/img/s784x533_jfs/t1/34307/32/18940/45363/635a0b47Ee421273d/d6b38b0ff1feb538.png)

- network: æˆ‘ä»¬æ¯æ¬¡è¿›è¡Œè·¯ç”±è·³è½¬éƒ½è¦æŒ‰éœ€åŠ è½½èµ„æºï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å•ä¸ªé¡µé¢çš„ DomContentLoaded å°½å¯èƒ½å¿«ä»¥ä¿è¯é¡µé¢ Dom ç»“æ„çš„æ¸²æŸ“æ•ˆç‡ã€‚

    ![image.png](https://img12.360buyimg.com/img/s1397x50_jfs/t1/146528/14/32340/26597/635a1adcEe5671f04/4ee4cf40ba1b720c.png)

- é¡µé¢æ„å»ºæ—¶é—´

    ![image.png](https://img12.360buyimg.com/img/s754x284_jfs/t1/101480/17/34324/94579/635a1b57E31984e57/bfc7eb30cd6bd34d.png)
> è¿™äº›æŒ‡æ ‡éƒ½é—´æ¥åé¦ˆå‡ºåº”ç”¨çš„ä½“éªŒé—®é¢˜äºŸå¾…è§£å†³ã€‚

![image.png](https://img12.360buyimg.com/img/s300x300_jfs/t1/84460/12/21122/17690/635a1b80Ea68ff688/1119848293b3bee2.jpg)

### 3.2 ä¼˜åŒ–æªæ–½
- ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ  
    - **1. å¼€å¯ gzip å‹ç¼©**  
    é€šè¿‡ network å¯ä»¥çœ‹åˆ°èµ„æºå®é™…å¤§å°åŠ http è¯·æ±‚çš„ sizeï¼Œå¦‚æœä¸å¼€å¯å‹ç¼©ï¼ŒäºŒè€…åŸºæœ¬æ˜¯æ²¡æœ‰å·®å¼‚çš„ã€‚
    ![image.png](https://img12.360buyimg.com/img/s1540x247_jfs/t1/85602/26/33860/99692/635a1ca3Ebdb4b039/203e11113afbf058.png)
    gzip ä¼˜åŒ–åå¯ä»¥çœ‹åˆ°, å‹ç¼©æ•ˆæœè¿˜æ˜¯å¾ˆæ˜æ˜¾çš„

    å¼€å¯ nginx çš„ gzip å‹ç¼©
        ```shell
        gzip                            on;
        gzip_min_length                 100;
        gzip_buffers                    4 16k;
        # gzip_http_version               1.0;
        gzip_comp_level                 9;
        gzip_types                      gzip_types text/plain application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png application/javascript;
        gzip_vary                       on;
        gzip_proxied                       any;
        ```
     
         é€šè¿‡ response header åˆ¤æ–­å‹ç¼©æ˜¯å¦ç”Ÿæ•ˆ  
        ![image.png](https://img12.360buyimg.com/img/s356x278_jfs/t1/123411/6/32476/40551/635a1e58E1bef9e2f/8e931332a588fc1e.png)  
    - **2. é’ˆå¯¹éé¦–å±ç»„ä»¶åŸºäº dynamic åŠ¨æ€åŠ è½½**  
        åœ¨é¡µé¢åŠ è½½è¿‡ç¨‹ä¸­ï¼Œé’ˆå¯¹ä¸€äº›ä¸å¯è§ç»„ä»¶ï¼Œæˆ‘ä»¬åº”è¯¥åŠ¨æ€å¯¼å…¥ï¼Œè€Œä¸æ˜¯æ­£å¸¸å¯¼å…¥ï¼Œ`ç¡®ä¿åªæœ‰éœ€è¦è¯¥ç»„ä»¶çš„åœºæ™¯ä¸‹ï¼Œæ‰ fetch å¯¹åº”èµ„æº`, é€šè¿‡ `next/dynamic`ï¼Œåœ¨æ„å»ºæ—¶ï¼Œæ¡†æ¶å±‚é¢ä¼šå¸®æˆ‘ä»¬è¿›è¡Œåˆ†åŒ…
        ```javascript
        import dynamic from 'next/dynamic'
        const Modal = dynamic(() => import('../components/mModal'));
        export default function Index() {
          return (
            {showModal && <Modal />}
          )
        }
        ```
        æ‰“å¼€Networkã€‚å½“æ¡ä»¶æ»¡è¶³æ—¶ï¼Œä½ å°†çœ‹åˆ°ä¸€ä¸ªæ–°çš„ç½‘ç»œè¯·æ±‚è¢«å‘å‡ºæ¥è·å–åŠ¨æ€ç»„ä»¶(å•å‡»æŒ‰é’®æ‰“å¼€ä¸€ä¸ªæ¨¡æ€)ã€‚
    - **3 . next/script ä¼˜åŒ– script åŠ è½½æ—¶**  
    `next/script` å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ¥`å†³å®š js è„šæœ¬åŠ è½½çš„æ—¶æœº`  
    
        strategy | æè¿°
        ---- | ---
        beforeInteractive | å¯äº¤äº’å‰åŠ è½½è„šæœ¬
        afterInteractive | å¯äº¤äº’ååŠ è½½è„šæœ¬
        lazyOnload | æµè§ˆå™¨ç©ºé—²æ—¶åŠ è½½è„šæœ¬
    
        ```html
        <Script strategy="lazyOnload" src="//wl.jd.com/boomerang.min.js" />
        ```
    - **4. next/image ä¼˜åŒ–å›¾ç‰‡èµ„æº**  
        `next/image` å¯å¸®åŠ©æˆ‘ä»¬`å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©ï¼ˆå°ºå¯¸ or è´¨é‡ï¼‰ï¼Œä¸”æ”¯æŒå›¾ç‰‡æ‡’åŠ è½½`ï¼Œé»˜è®¤ loader ä¾èµ– nextjs å†…ç½®æœåŠ¡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡`{loader: custom}`è‡ªå®šä¹‰loader
        ```js
        import Image from 'next/image'
        const myLoader = ({ src, width, quality }) => {
          return `https://example.com/${src}?w=${width}&q=${quality || 75}`
        }
        const MyImage = (props) => {
          return (
            <Image
              loader={myLoader}
              src="me.png"
              alt="Picture of the author"
              width={500}
              height={500}
            />
          )
        }
        ```
    - **5. next/link é¢„åŠ è½½**  
        åŸºäº `hover è¯†åˆ«ç”¨æˆ·æ„å›¾`ï¼Œå½“ç”¨æˆ· hover åˆ° Link æ ‡ç­¾æ—¶ï¼Œ`å¯¹å³å°†è·³è½¬çš„é¡µé¢èµ„æºè¿›è¡Œé¢„åŠ è½½`ï¼Œè¿›ä¸€æ­¥é˜²æ­¢é¡µé¢å¡é¡¿
        ```js
        import Link from 'next/link'
        <Link prefetch={false} href={href}>ç›®æ ‡é¡µé¢</Link>
        ```
    - **6. é™æ€å†…å®¹é¢„åŠ è½½**  
        åŸºäº `getStaticProps` å¯¹ä¸éœ€è¦æƒé™çš„å†…å®¹è¿›è¡Œé¢„åŠ è½½ï¼Œå®ƒå°†åœ¨ NextJS æ„å»ºæ—¶è¢«ç¼–è¯‘åˆ°é¡µé¢ä¸­ï¼Œ`å‡å°‘äº† http è¯·æ±‚æ•°é‡`
        ```js
        function Blog({ posts }) {
          return (
            <ul>
              {posts.map((post) => (
                <li>{post.title}</li>
              ))}
            </ul>
          )
        }
        export async function getStaticProps() {
          const res = await fetch('https://.../posts')
          const posts = await res.json()

          return {
            props: {
              posts,
            },
          }
        }
        export default Blog
        ```
    - **7. ç¬¬ä¸‰æ–¹ library è¿‡å¤§æ—¶ï¼ŒåŸºäº umd æŒ‰éœ€åŠ è½½**  
    å½“`ç¬¬ä¸‰æ–¹ library è¿‡å¤§æ—¶ï¼Œä»¥ umd è¿›è¡Œå¼•å…¥`ï¼Œåœ¨éœ€è¦çš„åœºæ™¯ä¸‹é€šè¿‡ script è¿›è¡ŒåŠ è½½ã€‚
        ```js
        // å°è£…è®°è½½umdæ¨¡å—çš„hoc
        function loadUmdHoc(Comp: (props) => JSX.Element, src: string) {
          return function Hoc(props) {
            const [isLoaded, setLoaded] = useState(
              !!Array.from(document.body.getElementsByTagName('script')).filter(
                (item) => item.src.match(src)
              ).length
            )
            useEffect(() => {
              if (isLoaded) return
              const script = document.createElement('script')
              script.src = src
              script.onload = () => {
                setLoaded(true)
              }
              document.body.append(script)
            }, [])

            if (isLoaded) {
              return <Comp {...props} />
            }
            return <></>
          }
        }
        
        function Upload(){
          // todo ä½¿ç”¨umdæ¨¡å—
          return <></>
        }
        
        // ä½¿ç”¨è¯¥ç»„ä»¶æ—¶ï¼ŒåŠ è½½hoc
        export default loadUmdHoc(
          Upload,
          'xxx.umd.js'
        )
        ```

- ä¼˜åŒ–ç ”å‘ä½“éªŒ  
    - **1. åŸºäº urlimport è¿›è¡Œç˜¦èº«ï¼Œæå‡ç¼–è¯‘æ•ˆç‡**  
        `urlImport` æ˜¯ NextJS æä¾›çš„ä¸€ä¸ªå®éªŒç‰¹æ€§ï¼Œæ”¯æŒåŠ è½½è¿œç¨‹ esmodule
    ![image.png](https://img12.360buyimg.com/img/s1934x676_jfs/t1/148644/39/30658/95984/635a1e8fE78aa70e7/2819da533964e8ef.png)  
NextJS ä¼šåœ¨æœ¬åœ°å¯¹æ‰€åŠ è½½çš„è¿œç¨‹æ¨¡å—è¿›è¡Œç¼“å­˜, å‡å°‘äº†æˆ‘ä»¬æ‰€éœ€æ„å»ºçš„æ¨¡å—æ•°ï¼Œç¼ºç‚¹æ˜¯å®ƒä¼š`å½±å“ treeShaking` çš„ä¸€ä¸ªæ•ˆæœï¼Œå› æ­¤åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œå»ºè®®é€šè¿‡`NormalModuleReplacementPlugin`å¯¹ urlimport çš„ä¾èµ–è¿›è¡Œä¸€ä¸ªæœ¬åœ°æ›¿æ¢
    ![image.png](https://img12.360buyimg.com/img/s1620x1160_jfs/t1/179580/36/27661/238863/635a1ec7Eb5e75dab/23008470562d4038.png)
    
    - **2. webpack é…ç½®é€‰æ‹©æ€§å¿½ç•¥**  
      é’ˆå¯¹ä¸€äº›ç”Ÿæˆç¯å¢ƒçš„é…ç½®æˆ‘ä»¬å¯ä»¥`é€šè¿‡åŒºåˆ†ç¯å¢ƒæ¥è¿›è¡Œé€‰æ‹©æ€§å¿½ç•¥éƒ¨åˆ†é…ç½®`ï¼Œå¦‚ module federation exposes åœ¨å¼€å‘ç¯å¢ƒæˆ‘ä»¬å°±å¯ä»¥å¿½ç•¥æ‰ã€‚  
      
      **dev.conf.js**
    ![image.png](https://img12.360buyimg.com/img/s1606x1156_jfs/t1/210928/26/27281/154177/635a1f86Eba8950a6/f2c515f0de7fb3b5.png)  
      **pro.conf.js**
    ![image.png](https://img12.360buyimg.com/img/s1548x1638_jfs/t1/189426/33/28456/234417/635a1fa7E31d64d4f/29311f6b5d73342d.png)
    - **3. å¼€å¯ SWC ç¼–è¯‘**   
    SWC æ˜¯åŸºäº Rust å®ç°çš„ä¸€æ¬¾å¼€å‘å·¥å…·ï¼Œæ—¢å¯ç”¨äºç¼–è¯‘ä¹Ÿå¯ç”¨äºæ‰“åŒ…ï¼Œæ®å®˜æ–¹è¨€ï¼Œå®ƒæ¯” Babel å¿«äº† 20~70å€ï¼ŒNextJS åœ¨ 12 ç‰ˆæœ¬é»˜è®¤æ‰“å¼€äº† SWC çš„æ”¯æŒã€‚å¼€å¯ SWC åï¼Œåº”ç”¨çš„ç¼–è¯‘é€Ÿåº¦å°†æ¯” Babel å¿« 17 å€ï¼Œåˆ·æ–°é€Ÿåº¦å¿« 5 å€ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœä½ é€šè¿‡`.babelrc`è‡ªå®šä¹‰ babel é…ç½®ï¼ŒSWC çš„ä¸€äº›ç‰¹æ€§å°†ä¼šè¢«å…³é—­ã€‚

### 3.3 ä¼˜åŒ–å
ä»ä»¥ä¸‹æŒ‡æ ‡å¯ä»¥çœ‹å‡ºæˆ‘ä»¬åº”ç”¨çš„ä½“éªŒå¾—åˆ°äº†å¾ˆå¤§æå‡, å®é™…çš„ä¸€ä¸ªäº¤äº’ä½“éªŒä¹Ÿå¥½äº†ä¸å°‘ï¼Œåœ¨è·¯ç”±è·³è½¬ä¸Šå®ç°äº†ç±»ä¼¼ SPA çš„ä¸€ä¸ªä½“éªŒï¼Œå³ä½¿æ˜¯å„é¡µé¢èµ„æºæŒ‰éœ€åŠ è½½ä¸ä¼šå†å‡ºç°é¡µé¢å¡é¡¿çš„æƒ…å†µã€‚  
![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d5f27a6708cb4b88a9c3a4d50d5b8558~tplv-k3u1fbpfcp-watermark.image?)
- FCP: é¦–æ¬¡å†…å®¹ç»˜åˆ¶æ—¶é—´ ä» 1.8s ä¼˜åŒ–åˆ° 0.35sï¼Œ`æå‡äº†è¿‘ 80%`

    ![image.png](https://img12.360buyimg.com/img/s744x308_jfs/t1/64774/26/18615/51495/635a2005Ea099be6b/22e7daa1c3b52d32.png)

- lighthouse: è¯„åˆ†ä»55æå‡åˆ°äº†80ï¼ŒTTI ä»7.3s ä¼˜åŒ–åˆ°äº† 2.4s,  `åˆ†åˆ«æå‡äº† 30% / 64%ï¼Œchrome çš„æœ€ä½³å®è·µåˆ†è¾¾åˆ°äº†æ»¡åˆ†`ğŸ’¯

    ![](https://img12.360buyimg.com/img/s1420x1066_jfs/t1/21457/7/20560/130270/635a21ebEc7f74eb2/fe28f390371dc423.png)

- network: DomContentLoaded ä» 2.42s ä¼˜åŒ–åˆ° 0.67sï¼ŒLoadä» 3.77s ä¼˜åŒ–åˆ° 1.47s ï¼Œ`åˆ†åˆ«æå‡äº† 77% / 61%`
    
    ![image.png](https://img12.360buyimg.com/img/s1356x46_jfs/t1/211937/2/22360/25045/635a210cE90e7a5be/5b32e5f52fa1b04a.png)

- é¡µé¢æ„å»ºæ—¶é—´: åŸºæœ¬æ»¡è¶³äº†æ¯«ç§’çº§å®ç°é¡µé¢ç¼–è¯‘çš„éœ€æ±‚ï¼Œ`æå‡äº† 70% ä»¥ä¸Š`
    
    ![image.png](https://img12.360buyimg.com/img/s788x288_jfs/t1/18544/35/19546/95956/635a2240E75308acc/6ca44e562d7e7f54.png)
    
![image.png](https://img12.360buyimg.com/img/s1280x720_jfs/t1/148389/20/28223/31720/635a227aE2dd62cd0/10de64723d1c963c.jpg)

## å››ã€åç»­è§„åˆ’
ä¸ºäº†å®ç°æ›´ä¸ºæè‡´çš„ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬åç»­è®¡åˆ’å°†èµ„æºä¸ŠCDNï¼Œå‡å°‘`Waiting for server response`çš„æ€§èƒ½æŸè€—ï¼Œå¹¶åŠ å…¥`PWA`çš„ç¦»çº¿ç¼“å­˜ç‰¹æ€§ã€‚


å‚è€ƒæ–‡ç«   
[Optimize Next.js App Bundle and Improve Its Performance](https://www.syncfusion.com/blogs/post/optimize-next-js-app-bundle-improve-its-performance.aspx)  
[æˆ‘çœ‹Next.jsï¼šä¸€ä¸ªæ›´ç°ä»£çš„æµ·ç‹](https://baijiahao.baidu.com/s?id=1715929965351295334&wfr=spider&for=pc)

